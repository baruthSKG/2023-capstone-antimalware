from datetime import *
import os

path = os.getcwd()
os.makedirs(path + "\..\__logs", exist_ok=True)

#Could also be a full filepath if declared as a raw string
logFileName = path + "\..\__logs\log " + datetime.now().strftime("%m-%d-%Y %H-%M-%S") + ".txt"

inf_entry = []
file_entry = []

#Takes lists of filepaths for all infected and scanned files, and action taken for each infected file
def writeEntry(infected,scanned,actions):
    
    if (infected != "0" and actions != "0"):
        inf_entry.append(f"==INFECTIONS FOUND({len(infected)})==\n")
        for filePath in infected:
            count = 0
            inf_entry.append(f"\t{filePath}")
            inf_entry.append(f"\tINFECTION:{infected[filePath]}")
            inf_entry.append(f"\t\tACTION TAKEN: {actions[count]}\n") #usually something like QUARANTINED, but user may choose to ignore an infection warning
            count = count + 1
            
    if (infected == "0" and actions == "0"):   
        file_entry.append(f"==FILES SCANNED({len(scanned)})==\n")
        for filePath in scanned:
            file_entry.append(f"\t{filePath}\n")

    completeEntry(inf_entry, file_entry)

def completeEntry(inf_entry, file_entry):
    compl_entry = []
    compl_entry.append("")
    compl_entry.append(f"SCANNED ON:{datetime.now()}\n\n")
    for line in inf_entry:
        compl_entry.append(line)
    compl_entry.append("\n")
    for line in file_entry:
        compl_entry.append(line)
           
    with open(logFileName,"w+") as logFile:
        for line in compl_entry:
            logFile.write(line)   
    logFile.close()
