from datetime import *
import os

path = os.getcwd()
os.makedirs(path + "\..\__logs", exist_ok=True)

#Takes lists of filepaths for all infected and scanned files, and actions taken for each infected file
def writeScanLog(infected,scanned,actions,errors): 
    #Saved as seperate variable to ensure the datetime in the log filename and written in the log agree
    timeStamp = datetime.now().strftime("%m-%d-%Y %H-%M-%S")

    logFileName = path + "\..\__logs\scanLog " + timeStamp + ".txt"
    
    entry = ""
    
    entry += f"SCAN PERFORMED:{timeStamp}\n"
    
    entry += f"==INFECTIONS FOUND({len(infected)})==\n"
    if len(infected) == 0:
        entry += "\tNo Infections Found\n"
        
    else:
        for enum, filePath in enumerate(infected):
            entry += f"\t{filePath} |Infection:{infected[filePath]}\n"
            entry += f"\tACTION TAKEN:{actions[enum]}\n" #Delete, Quarantine, or Keep
            
        
    entry += f"==FILES SCANNED({len(scanned)})==\n"
    for filePath in scanned:
        entry += f"\t{filePath}\n"
        
    entry += f"==ERRORS({len(errors)})==\n"
    for filePath in errors:
        entry += f"\t{filePath}\n"
           
    with open(logFileName,"w") as logFile:
        logFile.write(entry)
